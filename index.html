<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯æ„›è¨ˆç®—æ©Ÿ ğŸŒ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
        }
        
        .calculator-shadow {
            box-shadow: 0 20px 40px rgba(255, 182, 193, 0.3);
        }
        
        .button-hover {
            transition: all 0.2s ease;
        }
        
        .button-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        .button-hover:active {
            transform: translateY(0);
        }
        
        .display-glow {
            box-shadow: inset 0 2px 8px rgba(255, 182, 193, 0.2);
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        .bounce-animation {
            animation: bounce 1s;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-100 via-purple-50 to-blue-100 flex items-center justify-center p-4">
    <div class="calculator-shadow bg-white rounded-3xl p-8 max-w-sm w-full">
        <!-- æ¨™é¡Œ -->
        <div class="text-center mb-6">
            <h1 class="text-2xl font-bold text-pink-600 mb-2">ğŸŒ¸ å¯æ„›è¨ˆç®—æ©Ÿ ğŸŒ¸</h1>
            <div class="flex justify-center space-x-2">
                <span class="text-lg">ğŸ€</span>
                <span class="text-lg">ğŸ’•</span>
                <span class="text-lg">ğŸŒˆ</span>
            </div>
        </div>
        
        <!-- é¡¯ç¤ºè¢å¹• -->
        <div class="display-glow bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-6 mb-6 border-2 border-pink-200">
            <div id="display" class="text-right text-3xl font-bold text-gray-700 min-h-[40px] overflow-hidden">0</div>
            <div id="operation" class="text-right text-sm text-pink-400 mt-1 min-h-[20px]"></div>
        </div>
        
        <!-- æŒ‰éˆ•å€åŸŸ -->
        <div class="grid grid-cols-4 gap-3">
            <!-- ç¬¬ä¸€æ’ -->
            <button onclick="clearAll()" class="button-hover bg-gradient-to-b from-red-300 to-red-400 hover:from-red-400 hover:to-red-500 text-white font-bold py-4 rounded-2xl text-lg shadow-lg">
                ğŸ—‘ï¸
            </button>
            <button onclick="deleteLast()" class="button-hover bg-gradient-to-b from-orange-300 to-orange-400 hover:from-orange-400 hover:to-orange-500 text-white font-bold py-4 rounded-2xl text-lg shadow-lg">
                â¬…ï¸
            </button>
            <button onclick="inputOperator('/')" class="button-hover bg-gradient-to-b from-purple-300 to-purple-400 hover:from-purple-400 hover:to-purple-500 text-white font-bold py-4 rounded-2xl text-lg shadow-lg">
                â—
            </button>
            <button onclick="inputOperator('*')" class="button-hover bg-gradient-to-b from-purple-300 to-purple-400 hover:from-purple-400 hover:to-purple-500 text-white font-bold py-4 rounded-2xl text-lg shadow-lg">
                âœ–ï¸
            </button>
            
            <!-- ç¬¬äºŒæ’ -->
            <button onclick="inputNumber('7')" class="button-hover bg-gradient-to-b from-blue-200 to-blue-300 hover:from-blue-300 hover:to-blue-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                7
            </button>
            <button onclick="inputNumber('8')" class="button-hover bg-gradient-to-b from-blue-200 to-blue-300 hover:from-blue-300 hover:to-blue-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                8
            </button>
            <button onclick="inputNumber('9')" class="button-hover bg-gradient-to-b from-blue-200 to-blue-300 hover:from-blue-300 hover:to-blue-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                9
            </button>
            <button onclick="inputOperator('-')" class="button-hover bg-gradient-to-b from-purple-300 to-purple-400 hover:from-purple-400 hover:to-purple-500 text-white font-bold py-4 rounded-2xl text-lg shadow-lg">
                â–
            </button>
            
            <!-- ç¬¬ä¸‰æ’ -->
            <button onclick="inputNumber('4')" class="button-hover bg-gradient-to-b from-green-200 to-green-300 hover:from-green-300 hover:to-green-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                4
            </button>
            <button onclick="inputNumber('5')" class="button-hover bg-gradient-to-b from-green-200 to-green-300 hover:from-green-300 hover:to-green-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                5
            </button>
            <button onclick="inputNumber('6')" class="button-hover bg-gradient-to-b from-green-200 to-green-300 hover:from-green-300 hover:to-green-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                6
            </button>
            <button onclick="inputOperator('+')" class="button-hover bg-gradient-to-b from-purple-300 to-purple-400 hover:from-purple-400 hover:to-purple-500 text-white font-bold py-4 rounded-2xl text-lg shadow-lg">
                â•
            </button>
            
            <!-- ç¬¬å››æ’ -->
            <button onclick="inputNumber('1')" class="button-hover bg-gradient-to-b from-yellow-200 to-yellow-300 hover:from-yellow-300 hover:to-yellow-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                1
            </button>
            <button onclick="inputNumber('2')" class="button-hover bg-gradient-to-b from-yellow-200 to-yellow-300 hover:from-yellow-300 hover:to-yellow-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                2
            </button>
            <button onclick="inputNumber('3')" class="button-hover bg-gradient-to-b from-yellow-200 to-yellow-300 hover:from-yellow-300 hover:to-yellow-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                3
            </button>
            <button onclick="calculate()" class="button-hover bg-gradient-to-b from-pink-400 to-pink-500 hover:from-pink-500 hover:to-pink-600 text-white font-bold py-4 rounded-2xl text-lg shadow-lg row-span-2">
                ğŸ’–<br>=
            </button>
            
            <!-- ç¬¬äº”æ’ -->
            <button onclick="inputNumber('0')" class="button-hover bg-gradient-to-b from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg col-span-2">
                0
            </button>
            <button onclick="inputNumber('.')" class="button-hover bg-gradient-to-b from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-400 text-gray-700 font-bold py-4 rounded-2xl text-xl shadow-lg">
                .
            </button>
        </div>
        
        <!-- åº•éƒ¨è£é£¾ -->
        <div class="text-center mt-6">
            <div class="flex justify-center space-x-2 text-lg">
                <span>ğŸŒŸ</span>
                <span>âœ¨</span>
                <span>ğŸŒŸ</span>
            </div>
        </div>
    </div>

    <script>
        let currentInput = '0';
        let operator = null;
        let previousInput = null;
        let shouldResetDisplay = false;

        const display = document.getElementById('display');
        const operationDisplay = document.getElementById('operation');

        function updateDisplay() {
            display.textContent = currentInput;
            
            if (operator && previousInput !== null) {
                const operatorSymbols = {
                    '+': 'â•',
                    '-': 'â–', 
                    '*': 'âœ–ï¸',
                    '/': 'â—'
                };
                operationDisplay.textContent = `${previousInput} ${operatorSymbols[operator]}`;
            } else {
                operationDisplay.textContent = '';
            }
        }

        function inputNumber(num) {
            if (shouldResetDisplay) {
                currentInput = '0';
                shouldResetDisplay = false;
            }
            
            if (currentInput === '0' && num !== '.') {
                currentInput = num;
            } else if (num === '.' && currentInput.includes('.')) {
                return; // é˜²æ­¢å¤šå€‹å°æ•¸é»
            } else {
                currentInput += num;
            }
            
            updateDisplay();
            
            // æ·»åŠ å¯æ„›çš„å‹•ç•«æ•ˆæœ
            display.classList.add('bounce-animation');
            setTimeout(() => {
                display.classList.remove('bounce-animation');
            }, 1000);
        }

        function inputOperator(op) {
            if (operator && !shouldResetDisplay) {
                calculate();
            }
            
            operator = op;
            previousInput = parseFloat(currentInput);
            shouldResetDisplay = true;
            updateDisplay();
        }

        function calculate() {
            if (operator && previousInput !== null && !shouldResetDisplay) {
                const current = parseFloat(currentInput);
                let result;
                
                switch (operator) {
                    case '+':
                        result = previousInput + current;
                        break;
                    case '-':
                        result = previousInput - current;
                        break;
                    case '*':
                        result = previousInput * current;
                        break;
                    case '/':
                        if (current === 0) {
                            alert('ğŸ™ˆ ä¸èƒ½é™¤ä»¥é›¶å–”ï¼');
                            return;
                        }
                        result = previousInput / current;
                        break;
                    default:
                        return;
                }
                
                // è™•ç†å°æ•¸é»é¡¯ç¤º
                if (result % 1 !== 0) {
                    result = parseFloat(result.toFixed(8));
                }
                
                currentInput = result.toString();
                operator = null;
                previousInput = null;
                shouldResetDisplay = true;
                updateDisplay();
                
                // è¨ˆç®—å®Œæˆçš„æ…¶ç¥å‹•ç•«
                display.classList.add('bounce-animation');
                setTimeout(() => {
                    display.classList.remove('bounce-animation');
                }, 1000);
            }
        }

        function clearAll() {
            currentInput = '0';
            operator = null;
            previousInput = null;
            shouldResetDisplay = false;
            updateDisplay();
        }

        function deleteLast() {
            if (currentInput.length > 1) {
                currentInput = currentInput.slice(0, -1);
            } else {
                currentInput = '0';
            }
            updateDisplay();
        }

        // éµç›¤æ”¯æ´
        document.addEventListener('keydown', function(event) {
            const key = event.key;
            
            if (key >= '0' && key <= '9' || key === '.') {
                inputNumber(key);
            } else if (key === '+' || key === '-' || key === '*' || key === '/') {
                inputOperator(key);
            } else if (key === 'Enter' || key === '=') {
                calculate();
            } else if (key === 'Escape' || key === 'c' || key === 'C') {
                clearAll();
            } else if (key === 'Backspace') {
                deleteLast();
            }
        });

        // åˆå§‹åŒ–é¡¯ç¤º
        updateDisplay();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99007a01b256f234',t:'MTc2MDcxMTI0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
